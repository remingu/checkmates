<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #btn_login {
            background: aquamarine;
            width: 4em;
            text-align: center;

        }
        #btn_login:active {
            background: cadetblue;
            width: 4em;
            text-align: center;
        }
    </style>
    <script>
    function engage() {
        var sid = login();
        addhost(sid);
        publish(sid);
        logout(sid);
    }
    function login () {
        var req = new XMLHttpRequest();
        var creds = {"user" : document.getElementById("uid").value,
                    "password" : document.getElementById("pwd").value};
        creds = JSON.stringify(creds)
        req.setRequestHeader('Content-Type', 'application/json');
        req.open('POST', 'https://<smartcenter-ip>/web_api/login');
        req.send(creds);
        var cpsid = req.getResponseHeader("sid")
        return cpsid

    }
    function logout (sessionid) {
        var req = new XMLHttpRequest();
        req.setRequestHeader("Content-Type", "application/json");
        req.setRequestHeader("X-chkp-sid", sessionid);
        req.open("POST", "https://<smartcenter-ip>/web_api/logout");
        req.send();
    }
    function addhost (sessionid) {
        var req = new XMLHttpRequest();
        req.setRequestHeader("Content-Type", "application/json");
        req.setRequestHeader("X-chkp-sid", sessionid);
        var hostdata = {"host": document.getElementById("host").value,
                        "ipv4-address": document.getElementById("ipv4-address").value};
        hostdata = JSON.stringify(hostdata);
        req.open("POST", "https://<smartcenter-ip>/web_api/add-host");
        req.send(hostdata);
    }
    function publish (sessionid) {
        var req = new XMLHttpRequest();
        req.setRequestHeader("Content-Type", "application/json");
        req.setRequestHeader("X-chkp-sid", sessionid);
        req.open("POST", "https://<smartcenter-ip>/web_api/publish");
        req.send();
    }
    </script>
</head>
<body>
username : <input type="text" width="60" id="uid">
password : <input type="password" width="60" id="pwd"><br>
hostname : <input type="text" width="60" id="host">
ip4-address: <input type="text" width="60" id="ipv4-address">

<div onclick="engage()" id="btn_login">submit</div>
</body>
</html>
